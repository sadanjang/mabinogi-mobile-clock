<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>마비노기 모바일 — 게임 시계</title>
<style>
  body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Apple SD Gothic Neo,Noto Sans KR,Helvetica,Arial;
       background:#0b1020;color:#e7ecff}
  .wrap{max-width:680px;margin:40px auto;padding:20px}
  .card{background:#121a2e;border:1px solid #2a355a;border-radius:16px;padding:20px}
  h1{margin:0 0 16px;font-size:22px}
  .row{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-top:1px solid #223}
  .row:first-of-type{border-top:0}
  .label{color:#9fb0d6;font-size:14px}
  .time{font-variant-numeric:tabular-nums;letter-spacing:.5px;font-size:26px}
  .muted{color:#8da0c9;font-size:12px;margin-top:10px}
  .cfg{font-size:12px;color:#9fb0d6;margin-top:14px;line-height:1.5}
  code{background:#0d1430;border:1px solid #26315a;border-radius:8px;padding:2px 6px}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>마비노기 모바일 — 게임 시각</h1>

      <div class="row">
        <div class="label">현실 시각 (Asia/Seoul)</div>
        <div id="real" class="time">--:--:--</div>
      </div>

      <div class="row">
        <div class="label">게임 시각</div>
        <div id="game" class="time">--:--:--</div>
      </div>

      <div class="cfg">
        <div>기준(앵커): <code>현실 23:30:00 ↔ 게임 12:00:00</code></div>
        <div>속도: <code>SPEED = 48</code> (현실 75초 ↔ 게임 1시간)</div>
      </div>

      <div class="muted">* 주기적인 측정으로 오차가 보이면, 아래 스크립트 상단의
        <code>ANCHOR_REAL</code> 또는 <code>ANCHOR_GAME_SEC</code>를 조정하세요.</div>
          <div class="cfg" id="mappingBox" style="margin-top:16px">
        <div style="margin-bottom:6px">현실↔게임 오전/오후 전환 주기: <b id="cyclePeriod">--분 --초</b>
          · 다음 전환까지: <b id="cycleNext">--:--</b></div>
        <div style="font-size:12px;color:#9fb0d6;line-height:1.6">
          공식: <code>cycle_real_sec = (12×3600) / SPEED</code>,
          <code>k = ⌊(t<sub>real</sub> − t<sub>anchor</sub>)/cycle_real_sec⌋</code>,
          <code>AM/PM = (k 짝수 → 앵커와 같음, 홀수 → 반대)</code>
        </div>
      </div>
    </div>
  </div>

<script>
/** ▼ 설정값 — 필요시 바꿔 쓰세요 */
const SPEED = 48; // 현실 1초당 게임 48초
// 현실 앵커: 2025-10-17 23:30:00 (KST, +09:00)
const ANCHOR_REAL = new Date("2025-10-17T23:30:00+09:00").getTime();
// 게임 앵커: 12:00:00 → 초 단위
const ANCHOR_GAME_SEC = 12 * 3600;
// 오전/오후 전환 주기(현실 기준): 게임 12시간에 해당하는 현실 시간(초)
const HALF_DAY_GAME_SEC = 12 * 3600;
const CYCLE_REAL_SEC = HALF_DAY_GAME_SEC / SPEED; // 보통 900초(=15분)
/** ▲ 설정 끝 */

function pad(n){ return n.toString().padStart(2,'0'); }
function fmtHMS(sec){
  sec = ((sec % 86400) + 86400) % 86400; // 0~86399 보정
  const h = Math.floor(sec/3600);
  const m = Math.floor((sec%3600)/60);
  const s = Math.floor(sec%60);
  return `${pad(h)}:${pad(m)}:${pad(s)}`;
}

// 게임 시각 AM/PM 라벨 (요청에 따라 반전 규칙 적용: 0~11 → 오후, 12~23 → 오전)
function ampmLabelFromHour(h){
  // NOTE: 사용자가 관측한 실제 게임상의 오전/오후 표기와 일치시키기 위해 반전
  return h < 12 ? '오후' : '오전';
}

function formatMS(sec){
  sec = Math.max(0, Math.floor(sec));
  const m = Math.floor(sec/60), s = sec%60;
  return `${pad(m)}:${pad(s)}`;
}

function tick(){
  const now = Date.now();
  // 현실 시각 표기
  const real = new Date(now);
  const realStr = `${pad(real.getHours())}:${pad(real.getMinutes())}:${pad(real.getSeconds())}`;
  document.getElementById('real').textContent = realStr;

  // 게임 시각 계산: 앵커에서 흐른 현실시간 * SPEED + 앵커 게임초
  const elapsedRealSec = (now - ANCHOR_REAL) / 1000;
  const gameSec = ANCHOR_GAME_SEC + elapsedRealSec * SPEED;
  const norm = ((gameSec % 86400) + 86400) % 86400;
  const gh = Math.floor(norm/3600);
  const ampm = ampmLabelFromHour(gh);
  const displayH = gh % 12 === 0 ? 12 : gh % 12;
  const gm = Math.floor((norm%3600)/60);
  const gs = Math.floor(norm%60);
  document.getElementById('game').textContent = `${ampm} ${pad(displayH)}:${pad(gm)}:${pad(gs)}`;

  // ▶ 오전/오후 전환 주기 표시 (현실 기준)
  // 앵커 시각의 AM/PM 라벨
  const anchorLabel = ampmLabelFromHour(12); // 게임 12:00의 라벨
  // 지금까지 지난 주기 수
  const k = Math.floor(elapsedRealSec / CYCLE_REAL_SEC);
  // 남은 시간
  const rem = CYCLE_REAL_SEC - (elapsedRealSec % CYCLE_REAL_SEC);
  // 주기 길이와 남은 시간 표시
  const periodEl = document.getElementById('cyclePeriod');
  const nextEl = document.getElementById('cycleNext');
  if (periodEl && nextEl){
    periodEl.textContent = `${pad(Math.floor(CYCLE_REAL_SEC/60))}분 ${pad(Math.floor(CYCLE_REAL_SEC%60))}초`;
    nextEl.textContent = formatMS(rem);
  }
}

tick();
setInterval(tick, 200); // 0.2초마다 갱신
</script>
</body>
</html>
